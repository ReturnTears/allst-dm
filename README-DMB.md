# 设计模式之美
```text
描述代码质量的词汇也有很多，⽐如可读性、可维护性、灵活、优雅、简洁等，这些词汇是从不同的维度去评价代码质量的。

1、可维护性（maintainability），落实到编码开发，所谓的“维护”⽆外乎就是修改 bug、修改⽼的代码、添加新的代码之类的⼯作。
所谓“代码易维护”就是指，在不破坏原有代码设计、不引⼊新的 bug 的情况下，能够快速地修改或者添加代码。
所谓“代码不易维护”就是指，修改或者添加代码需要冒着极⼤的引⼊新 bug 的⻛险，并且需要花费很⻓的时间才能完成。

2、可读性（readability），落实到编码开发，可读性就是指代码的语义表达，⽐如变量、函数、类、模块、包等⽂档的语义表达。
我们在编写代码的时候，时刻要考虑到代码是否易读、易理解。除此之外，代码的可读性在⾮常⼤程度上会影响代码的可维护性。
毕竟，不管是修改 bug，还是修改添加功能代码，我们⾸先要做的事情就是读懂代码。代码读不⼤懂，就很有可能因为考虑不周全，
⽽引⼊新的 bug。我们需要看代码是否符合编码规范、命名是否达意、注释是否详尽、函数是否⻓短合适、模块划分是否清晰、
是否符合⾼内聚低耦合等等。你应该也能感觉到，从正⾯上，我们很难给出⼀个覆盖所有评价指标的列表。这也是我们⽆法量化可读性的原因。

3、灵活（flexibility），落实到编码开发，所谓“灵活”就是指，代码的架构设计、模块划分、类、函数、变量等⽂档的语义表达。
如果⼀段代码易扩展、易复⽤或者易⽤，我们都可以称这段代码写得⽐较灵活。所以，灵活这个词的含义⾮常宽泛，很多场景下都可以使⽤。

4、可扩展性（extensibility），代码的可扩展性表示，我们在不修改或少量修改原有代码的情况下，通过扩展的⽅式添加新的功能代码。
说直⽩点就是，代码预留了⼀些功能扩展点，你可以把新功能代码，直接插到扩展点上，⽽不需要因为要添加⼀个功能⽽⼤动⼲⼽，改动⼤量的原始代码。

5、简洁性（simplicity），有⼀条⾮常著名的设计原则，你⼀定听过，那就是 KISS 原则：“Keep It Simple，Stupid”。
这个原则说的意思就是，尽量保持代码简单。代码简单、逻辑清晰，也就意味着易读、易维护。我们在编写代码的时候，往往也会把简单、清晰放到⾸位。不过，很多编程经验不⾜的程序员会觉得，简单的
代码没有技术含量，喜欢在项⽬中引⼊⼀些复杂的设计模式，觉得这样才能体现⾃⼰的技术⽔平。实际上，思从深⽽⾏从简，
真正的⾼⼿能云淡⻛轻地⽤最简单的⽅法解决最复杂的问题。这也是⼀个编程⽼⼿跟编程新⼿的本质区别之⼀。

6、可复⽤性，代码的可复⽤性可以简单地理解为，尽量减少重复代码的编写，复⽤已有的代码。

7、可测试性，相对于前⾯六个评价标准，代码的可测试性是⼀个相对较少被提及，但⼜⾮常重要的代码质量评价标准。
代码可测试性的好坏，能从侧⾯上⾮常准确地反应代码质量的好坏。代码的可测试性差，⽐较难写单元测试，那基本上就能说明代码设计得有问题。

8、优雅（elegance），落实到编码开发，所谓“优雅”就是指，代码的语义表达，⽐如变量、函数、类、模块、包等⽂档的语义表达。

最常⽤到⼏个评判代码质量的标准是：可维护性、可读性、可扩展性、灵活性、简洁性、可复⽤性、可测试性。其
中，可维护性、可读性、可扩展性⼜是提到最多的、最重要的三个评价标准。
```
## ⾯向对象、设计原则、设计模式、编程规范、重构，这五者有何关系？
```text
1、⾯向对象编程因为其具有丰富的特性（封装、抽象、继承、多态），可以实现很多复杂的设计思路，是很多设计原则、设计模式等编码实现的基础。

2、设计原则是指导我们代码设计的⼀些经验总结，对于某些场景下，是否应该应⽤某种设计模式，具有指导意义。⽐如，“开闭原则”是很多设计模式（策略、模板等）的指导原则。

3、设计模式是针对软件开发中经常遇到的⼀些设计问题，总结出来的⼀套解决⽅案或者设计思路。应⽤设计模式的主要⽬的是提⾼代码的可扩展性。从抽象程度上来讲，设计原则⽐设计模式更抽象。设计模式更加具体、更加可执⾏。

4、编程规范主要解决的是代码的可读性问题。编码规范相对于设计原则、设计模式，更加具体、更加偏重代码细节、更加能落地。持续的⼩重构依赖的理论基础主要就是编程规范。

5、重构作为保持代码质量不下降的有效⼿段，利⽤的就是⾯向对象、设计原则、设计模式、编码规范这些理论。
实际上，⾯向对象、设计原则、设计模式、编程规范、代码重构，这五者都是保持或者提⾼代码质量的⽅法论，本质上都是服务于编写⾼质量代码这⼀件事的。
```

## 面向对象
```text
编程范式：
1、面向过程
2、面向对象
3、函数式编程
```

## 什么是⾯向对象编程？
```text
⾯向对象编程的英⽂缩写是 OOP，全称是 Object Oriented Programming。对应地，⾯向对象编程语⾔的英⽂缩写是 OOPL，全称是 Object Oriented Programming Language。

⾯向对象编程中有两个⾮常重要、⾮常基础的概念，那就是类（class）和对象（object）。这两个概念最早出现在1960 年，在 Simula 这种编程语⾔中第⼀次使⽤。
⽽⾯向对象编程这个概念第⼀次被使⽤是在 Smalltalk 这种编程语⾔中。Smalltalk 被认为是第⼀个真正意义上的⾯向对象编程语⾔。

可以⽤下⾯两句话来概括:
1、⾯向对象编程是⼀种编程范式或编程⻛格。它以类或对象作为组织代码的基本单元，并将封装、抽象、继承、多态四个特性，作为代码设计和实现的基⽯。

2、⾯向对象编程语⾔是⽀持类或对象的语法机制，并有现成的语法机制，能⽅便地实现⾯向对象编程四⼤特性（封装、抽象、继承、多态）的编程语⾔。

⾯向对象编程是⼀种编程范式或编程⻛格。它以类或对象作为组织代码的基本单元，并将封装、抽象、继承、多态四个特性，作为代码设计和实现的基⽯。

面向对象四大特效

封装（Encapsulation）
封装也叫作信息隐藏或者数据访问保护。类通过暴露有限的访问接⼝，授权外部仅能通过类提供的⽅式来访问内部信息或者数据。
它需要编程语⾔提供权限访问控制语法来⽀持，例如 Java 中的 private、protected、public 关键字。封装特性存在的意义，
⼀⽅⾯是保护数据不被随意修改，提⾼代码的可维护性；另⼀⽅⾯是仅暴露有限的必要接⼝，提⾼类的易⽤性。

抽象（Abstraction）
封装主要讲如何隐藏信息、保护数据，那抽象就是讲如何隐藏⽅法的具体实现，让使⽤者只需要关⼼⽅法提供了哪些功能，
不需要知道这些功能是如何实现的。抽象可以通过接⼝类或者抽象类来实现，但也并不需要特殊的语法机制来⽀持。
抽象存在的意义，⼀⽅⾯是提⾼代码的可扩展性、维护性，修改实现不需要改变定义，减少代码的改动范围；另⼀⽅⾯，
它也是处理复杂系统的有效⼿段，能有效地过滤掉不必要关注的信息。

继承（Inheritance）
继承是⽤来表示类之间的 is-a 关系，分为两种模式：单继承和多继承。单继承表示⼀个⼦类只继承⼀个⽗类，多继承表示⼀个⼦类可以继承多个⽗类。
为了实现继承这个特性，编程语⾔需要提供特殊的语法机制来⽀持。继承主要是⽤来解决代码复⽤的问题。

多态（Polymorphism）
多态是指⼦类可以替换⽗类，在实际的代码运⾏过程中，调⽤⼦类的⽅法实现。多态这种特性也需要编程语⾔提供特殊的语法机制来实现，
⽐如继承、接⼝类、duck-typing。多态可以提⾼代码的扩展性和复⽤性，是很多设计模式、设计原则、编程技巧的代码实现基础。

```

## 什么是面向对象编程语言？
```text
⾯向对象编程语⾔是⽀持类或对象的语法机制，并有现成的语法机制，能⽅便地实现⾯向对象编程四⼤特性（封装、抽象、继承、多态）的编程语⾔。

A.如何判定⼀个编程语⾔是否是⾯向对象编程语⾔？
如果按照严格的的定义，需要有现成的语法⽀持类、对象、四⼤特性才能叫作⾯向对象编程语⾔。如果放宽要求的话
，只要某种编程语⾔⽀持类、对象语法机制，那基本上就可以说这种编程语⾔是⾯向对象编程语⾔了，不⼀定⾮得要求具有所有的四⼤特性。

B.⾯向对象编程和⾯向对象编程语⾔之间有何关系？
⾯向对象编程⼀般使⽤⾯向对象编程语⾔来进⾏，但是，不⽤⾯向对象编程语⾔，我们照样可以进⾏⾯向对象编程。
反过来讲，即便我们使⽤⾯向对象编程语⾔，写出来的代码也不⼀定是⾯向对象编程⻛格的，也有可能是⾯向过程编程⻛格的。

C.什么是⾯向对象分析和⾯向对象设计？
简单点讲，⾯向对象分析就是要搞清楚做什么，⾯向对象设计就是要搞清楚怎么做。两个阶段最终的产出是类的设计，包括程序被拆解为哪些类，每个类有哪些属性⽅法、类与类之间如何交互等等。

```

## ⾯向对象编程相⽐⾯向过程编程有哪些优势？
```text
1、对于⼤规模复杂程序的开发，程序的处理流程并⾮单⼀的⼀条主线，⽽是错综复杂的⽹状结构。⾯向对象编程⽐起⾯向过程编程，更能应对这种复杂类型的程序开发。

2、⾯向对象编程相⽐⾯向过程编程，具有更加丰富的特性（封装、抽象、继承、多态）。利⽤这些特性编写出来的代码，更加易扩展、易复⽤、易维护。

3、从编程语⾔跟机器打交道的⽅式的演进规律中，我们可以总结出：⾯向对象编程语⾔⽐起⾯向过程编程语⾔，更加⼈性化、更加⾼级、更加智能。
```

## Constants、Utils 类设计问题
```text
1、这样的设计会影响代码的可维护性。如果参与开发同⼀个项⽬的⼯程师有很多，在开发过程中，可能都要涉及修改这个类，⽐如往这个类⾥添加常量，
    那这个类就会变得越来越⼤，成百上千⾏都有可能，查找修改某个常量也会变得⽐较费时，⽽且还会增加提交代码冲突的概率。
    
2、这样的设计还会增加代码的编译时间。当 Constants 类中包含很多常量定义的时候，依赖这个类的代码就会很多。
    那每次修改 Constants 类，都会导致依赖它的类⽂件重新编译，因此会浪费很多不必要的编译时间。
    不要⼩看编译花费的时间，对于⼀个⾮常⼤的⼯程项⽬来说，编译⼀次项⽬花费的时间可能是⼏分钟，
    甚⾄⼏⼗分钟。⽽我们在开发过程中，每次运⾏单元测试，都会触发⼀次编译的过程，这个编译时间就有可能会影响到我们的开发效率。

3、这样的设计还会影响代码的复⽤性。如果我们要在另⼀个项⽬中，复⽤本项⽬开发的某个类，⽽这个类⼜依赖 Constants 类。
    即便这个类只依赖 Constants 类中的⼀⼩部分常量，我们仍然需要把整个Constants 类也⼀并引⼊，也就引⼊了很多⽆关的常量到新的项⽬中。
    
上述问题解决思路：
方式1：将 Constants 类拆解为功能更加单⼀的多个类，⽐如跟 MySQL 配置相关的常量，我们放到MysqlConstants 类中；跟 Redis 配置相关的常量，我们放到 RedisConstants 类中。

方式2：不单独地设计 Constants 常量类，⽽是哪个类⽤到了某个常量，我们就把这个常量定义到这个类中。⽐如，RedisConfig 类⽤到了 Redis 配置相关的常量，那我们就直接将这些常量定义在RedisConfig 中，
    这样也提⾼了类设计的内聚性和代码的复⽤性。

Utils 类的出现是基于这样⼀个问题背景：如果我们有两个类 A 和 B，它们要⽤到⼀块相同的功能逻辑，为了避免代码重复。
实际上，只包含静态⽅法不包含任何属性的 Utils 类，是彻彻底底的⾯向过程的编程⻛格。
类⽐ Constants 类的设计，我们设计 Utils 类的时候，最好也能细化⼀下，针对不同的功能，设计不同的 Utils 类，⽐如 FileUtils、IOUtils、StringUtils、UrlUtils 等，不要设计⼀个过于⼤⽽全的 Utils 类。


```
